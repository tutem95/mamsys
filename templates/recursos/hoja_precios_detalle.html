{% extends "base.html" %}
{% block title %}Hoja {{ hoja.nombre }} · Precios{% endblock %}

{% block content %}
<main class="shell">
    <header>
        <div>
            <h1>Hoja de precios: {{ hoja.nombre }}</h1>
            <p>
                Creada: {{ hoja.creado_en }}<br>
                Origen: {% if hoja.origen %}{{ hoja.origen.nombre }}{% else %}Precios actuales al momento de la creación{% endif %}
            </p>
        </div>
        <a class="link link-back" href="{% url 'recursos:hoja_precios_list' %}">← Volver a hojas</a>
    </header>

    <section class="card">
        <h2>Materiales y precios en esta hoja</h2>
        {% if detalles %}
            <table>
                <thead>
                <tr>
                    <th>#</th>
                    <th>Material</th>
                    <th class="num">Cant. por unidad</th>
                    <th class="num">Precio unidad venta</th>
                    <th class="num">UA (precio análisis)</th>
                    <th>Moneda</th>
                </tr>
                </thead>
                <tbody>
                {% for d in detalles %}
                    <tr>
                        <td>{{ forloop.counter }}</td>
                        <td>{{ d.material.nombre }}</td>
                        <td class="num">{{ d.cantidad_por_unidad_venta|floatformat:2 }}</td>
                        <td class="num">{{ d.precio_unidad_venta|floatformat:2 }}</td>
                        <td class="num">{{ d.precio_por_unidad_analisis|floatformat:2 }}</td>
                        <td>{{ d.moneda }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p style="font-size:0.9rem; color:var(--text-muted);">No hay materiales registrados en esta hoja.</p>
        {% endif %}
    </section>
</main>
{% endblock %}
